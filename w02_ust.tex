%
\chapter{移动泛在环境中的分布式终端技术}\label{ch:ust}

\section{引言}

移动通信系统在过去的~20~年中，已经发展到第三代，它给人们的行为方式所带来的变化让人叹为观止，移动终端已经成为了人们生活的一个不可缺少的部分，以移动通信发展比较先进的欧盟国家为例，截至到~2006~年~12~月~31~日，手机数量已经达到~4.784~亿部，手机普及率超过~$100\%$~达到~$103.2\%$\ucite{bib:euro2007}，而移动终端本身的功能也不再是简单的通信了。由于移动终端相对于固定终端具有位置可变性和很强的个人性，移动业务也从传统的通信服务扩展到了围绕移动用户的全面的个人信息服务乃至金融服务。

尽管网络层全~IP~的趋势已经非常明显了，而且各个标准化组织都在将它的体系结构向全IP发展，但在网络层以下，却不存在这样一个统一的趋势。在各种第三代移动通信系统制式先后成熟进入商用阶段之后，数据传输速率大大超过~IMT-2000~规定的增强技术，如~HSDPA/HSUPA (High Speed Downlink/Uplink Packet Access, 高速下行/上行分组接入)~也开始部分商用，此外，无线数据接入领域的技术，如~WLAN~和~WiMAX~也开始介入移动业务领域，而同时，传统的第二代移动通信系统也不会迅速退出历史的舞台，未来的网络不可能拥有统一的空中接口技术。

网络技术多样化的原因在于：统一的空中接口固然会带来很多便利，但同时面临着很多挑战，不论从技术上还是经济上都是如此。各种无线通信技术都有各自的特点，没有一种技术可以在任何条件下满足用户的需求。正如前文刚刚提到的，第三代蜂窝网络能让用户即使在数百公里每小时的高速运动中仍然接受到连续稳定的网络业务，却难以为用户在静止状态下提供数十兆比特每秒的~Internet~网络访问；超宽带~(UWB)~技术可以提供在几米范围内的~Gbps~级的传输速率，却不能提供大范围的覆盖。组网方式的不同、传输技术的差异，使得各种技术都将在未来的无线通信领域占据一席之地。而从经济上考虑，网络接入提供商或运营商在过去的时间中，已经投入巨资部署了各自的网络，他们会尽量利用已有的网络来提供服务，而不是更换网络设备。因此，在未来的网络中，即使是充当同一种角色的网络~(如蜂窝网络)，也不会只有一种制式的。因此，网络的异构性是未来移动通信系统的基本特征之一。

网络技术异构化正在促进着业务环境的统一化。由于网络的异构性，用户将更频繁地在不同的网络中迁移，同时处于若干个不同网络的覆盖下的情况也将更为普遍。在这样的条件下，用户总是希望能够得到无缝的、一致的服务。在第三代移动通信系统中，已经出现了虚拟归属环境~(VHE)\ucite{bib:vhe}~这样的概念和开放业务接入~(OSA)\ucite{bib:osa}~这样的网络应用接口，希望能够支持更广泛的移动，让用户在不同网络间迁移的时候可以享受到一致的业务体验，而无需关心不同的网络是如何实现业务的。因此，在未来的网络中，统一化的业务环境所追求的目标将是，依据环境情况~(网络、终端、业务)，为用户提供其个人意义上的最佳服务，这里的最佳是根据不同用户偏好的一个综合的量度，而不是单一的性能指标。

网络异构化加剧的另一个后果是终端对多种接入网制式的支持正在从多模式向重配置/重构~(reconfiguration)\index{重构}~转移，因为网络的异构性，终端必须能够接入多个网络，在这种条件下，软件定义无线电~(SDR)~技术以其理论上无限多种网络的接入能力成为了研究的焦点，但是单一终端的射频部分的硬件实现是对~SDR~终端的一个限制，射频器件能够提供的工作范围毕竟是有限的。而且，尽管目前的终端正在集成越来越多的数据采集和媒体功能，但单一终端的体积、集成度以及成本限制使其难以在兼顾便携性的同时具有更好的业务展现效果。

而个人周边，在广域移动通信网络的接入技术向着更高速率、更高频谱利用率的方向，业务环境向着统一化演进的同时，短距离无线传输与网络技术也取得了飞速的进展，从高带宽的~UWB~到低功耗的~ZigBee\ucite{bib:zigbee}，从智能家电的互联到可穿戴网络，从精密的传感器到廉价的~RFID~标签，这些个人域的设备正在在人们周边构造一个~``智能空间''，服务着人们社会生活，也让~Mark Weiser~所预见的泛在计算愿景\ucite{bib:weiser91}离我们越来越近。

综合考虑移动终端的重构化趋势与个人周边设备智能化的趋势，我们可以转换思路，不再拘泥于单一便携设备的功能提升，转而利用个人周边各具不同能力的智能设备的协作，聚合重构为一个分布式的终端，不仅可以在功能上满足跨越多种接入网的无缝切换/漫游能力，更可以综合周边智能空间中的设备能力，收集更多用户上下文，提供更丰富的业务功能和更好的业务体验，进一步融入统一而且外延更加广泛的业务环境之中。

\section{分布式移动终端技术的已有研究}

早在~1998~年，爱立信、IBM、Intel、诺基亚和东芝就联手创立了蓝芽特别兴趣组~(SIG)，开始利用无线手段，为手持终端和其他个人移动计算设备进行功能扩展，利用蓝芽技术，终端可以无线地访问耳机、打印机、相机、GPS~接收机等外设，开始将终端的功能分布化。但是，蓝芽中的设备分工十分明确，主机和外设具有明显的界定\footnote{使用蓝芽网络封装协议~(BNEP)，也可以利用蓝芽底层承载，构建对等的计算机个域网，但这不在本文的考虑范围。}，智能性只体现在终端本身上，并没有涉及到个人域智能设备的协作，还没有构成我们所讨论分布式终端。

Telenor~的~Erik Vanem~等人在~2002~年提出了~``虚拟终端''\index{虚拟终端}~的概念\ucite{bib:dusvt,bib:dusvhe}，作为虚拟归属环境~(VHE)~的一个扩展。这里的所谓~``虚拟终端''，实际是一个网络服务，用户周边的每个设备都彼此独立地接入网络，并在这一服务当中注册，这样，用户就可以利用所有这些设备的功能，例如摄像、视频播放等，来使用多媒体服务。Vanem~等的~``虚拟终端''~服务可以利用~Parlay/OSA API~或是~Web Service~等业务控制方法来实现\ucite{bib:dusparlay,bib:dusws}，对于多媒体业务的应用来说，这种实现具有一些优点:
\begin{itemize}
	\item 直接利用已有网络和终端设备，实现简单。
	\item 可以同时利用多个终端的接入能力，一定程度地增加多媒体承载能力。
\end{itemize}
不过，``虚拟终端''~服务没有利用设备之间的互联能力和协作带来的能力上的提升，在面对移动泛在业务的时候可能会遇到一些挑战：
\begin{itemize}
	\item 移动泛在业务之中，每个用户在业务中都可能利用到数十乃至上百的信息传感器和其他各种计算或业务执行设备，这些设备可能十分简单，甚至不具备广域网络接入能力；并且，由于数量众多，在网络服务中为每个用户维护所有设备的属性描述和状态信息将会十分困难。
	\item 所有设备的信息都未经处理地直接传送给网络会造成不必要的流量需求，影响业务服务质量。
\end{itemize}

Tore J\o{}nvik~等人还提出了一种基于个人域网络~(PAN)~的~``虚拟设备''\ucite{bib:panda}，通过中间件技术来让个域网中的设备成为一个整体，将个域网中的设备与网络彻底隔离，在这样的情况下，个人域网络中的多个具有接入能力的设备对于网络和业务来说，彼此是没有关系的，从而也让网络无法对这些设备进行优化配置。在网络层上，建立在移动~IP~基础上的网络移动性~(NEMO, Network Mobility)\ucite{bib:nemo}~的研究考虑了这一问题，但由于在网络层上能够获得的关于用户的上下文信息十分有限，很难解决以用户为中心的设备相关性，举例来说，某些设备可能同时或不同时地隶属于不同用户，在这种情况下，通过~IP~地址来区分所属关系就变得十分困难。

欧盟~IST~中的~MAGNET~项目中引入了另一个类似概念――~``个人网络~(PN, Personal Network)''\ucite{slide:jacobsson2005,bib:alutoin2005}，PN~不再局限于物理位置上的相关性，把个人相关的设备们全部通过网络连接在一起，也就是说，把个人从距离这个一维相关性扩展到了~``业务上下文''~的多维相关性上，极大扩展了个人周边的概念。而在~PN~当中，加入到个人网络中的也包括随用户移动的个人域网络，即个人域网络由于其连接性，仍是考虑个人中心业务的基本元素。

\begin{figure}[tb]
	\begin{center}
		\includegraphics[width=.7\textwidth]{illu_2}
	\end{center}
	\caption{``统一业务终端技术''~项目中分布式终端的应用场景}
	\label{fig:ust-illu}
\end{figure}

在跟踪国外研究的同时，作者所在的研究团队也同时展开了终端分布化方面的研究，并在国家~863~计划支持的~``统一业务终端技术''\ucite{bib:ust}~和~``移动网格''~等项目之中，利用分布式中间件技术和短距离无线通信技术，设计了一个可以跟随用户移动、利用个人周边的智能设备和各种可用的广域网络，连续、一致地为用户提供服务~(图~\ref{fig:ust-illu})~的聚合重构分布式终端系统\index{聚合重构分布式终端}，后文中如无特殊声明即以~``分布式终端''~指代。在考虑了网络的功能抽象化，进一步将分布式终端所提供的业务环境与网络的业务能力进行架构上的统一、融合，进而提出了~``移动泛在业务环境~(MUSE)''~为下一步融合通信系统的演进指明了愿景。

\section{聚合重构分布式终端}

从已有研究可以看出，分布式的重构终端中的~``重构''~定义与重构概念提出之初相比，其范畴有一个飞跃式的扩展――从根据接入条件的变化被动调整终端自身的接入参数以适应其变化，进而到主动聚合个人周边的智能设备的包括但不限于接入能力的各种业务能力，不但适应变化，同时提供更多的业务元素。因此，我们将这种的分布式的重构行为定义为~``聚合重构''\index{重构!聚合重构}~，而将早期的~``重构''~归纳为~``适配重构''\index{重构!适配重构}~以示区别。

聚合重构分布式终端~(以下简称分布式终端)~是在周边智能设备上构建一个中间件层，该中间件可以维持设备间的组织，协助业务发现并利用可用业务资源。由于该中间件层分布式运行于用户的周边智能之上，因此，需要具有如下特点:
\begin{itemize}
	\item 由于用户周边设备自身的稳定性较低且用户操作的不确定性较高，中间件应具有较高的容错性，终端系统相关数据应具有较高冗余度。
	\item 由于用户在使用业务期间可能大范围移动，部分设备可能会始终跟随用户，而其它设备则可能中途加入或退出，因此，中间件应具有较强的动态组织能力和健壮的服务发现机制。
	\item 由于不同设备的能力具有较大的差异性，支持的互联方式也有所不同，中间件需要考虑到从传输到处理与存储能力上的异构性。
\end{itemize}

综上，本论文所述分布式终端系统的中间件基于对不同设备的业务资源的抽象，在异构个人域网络上对设备进行自组织，向业务提供一组一致的业务资源调用接口，并适应环境的变化。

\subsection{个人域设备的抽象}

参照~Parlay/OSA~中对网络功能的抽象方法，在分布式终端之中，个人周边智能设备的每个逻辑功能都被抽象为一个~``终端业务能力特征~(CF, Capability Feature)\index{能力特征}''，例如视频播放、音频采集、IP~网络连接等，每个能力特征都具有一组属性，定义一个能力特征的属性包括
\begin{itemize}
	\item 功能属性：如视频播放能力特征支持何种编码的视频，加密能力特征支持何种加密算法等。
	\item 能力属性：如网络连接能力特征的时延参数、带宽，图形显示能力特征支持多高的分辨率和刷新率等。
	\item 接口属性：如何将带显示视频码流送入视频播放能力特征，加密能力特征的数据如何送入、如何返回等。
\end{itemize}
分布式终端中的每个设备将其支持的每个能力特征都封装成一个具有属性的~``终端业务能力服务器~(CS)\index{能力服务器}''，该能力服务器的属性会作为其描述信息用于服务发现与服务调用\ucite{bib:patent-ust-cs,bib:patent-ust-cap}。同一个设备可能具有多个能力服务器，同样，不同的设备也可能提供同类能力特征，当然，它们的属性会有一些差异。

在分布式终端中，设备所提供的能力服务器具有如下特征:
\begin{itemize}
	\item 能力服务器之间可能具有依赖或调用关系，如视频播放能力会依赖于图形显示能力，这些依赖和或调用关系可以协助应用合理地选择可用业务资源。
	\item 能力服务器的属性可能受到其它能力服务器的影响，视频编码能力特征的性能会影响视频采集能力所能接收信息的分辨率和刷新率。
	\item 能力服务器可以彼此连接，完成更复杂的功能，如加密能力特征可以和某些其它数据传输类能力特征串联，进行安全传输。
\end{itemize}

为了使每个设备的能力可以被应用所发现、使用，每个设备都需要有一个独立的逻辑功能，把能力服务器的描述信息分发给其它设备、参与分布式终端的服务发现机制，这个逻辑单元被命名为聚合控制~(AC)~功能。

如果一个设备具备了聚合控制功能和一个或多个能力服务器，那么它就具有了成为分布式终端系统的一部分，为应用提供服务的能力了，这样的设备被称作分布式终端系统之中的~``基本节点~(BN, Basic Node)''。此外作为一个整体，分布式终端系统需要一些额外的能力来完成系统级的组织、维护工作，由于不同设备的计算、存储与通信能力的具有较强的差异性，只要有部分设备具有这样的额外能力就可以了，具有这些额外能力的设备被称作~``高级节点~(SN, Senior Node)\index{高级节点}''，它们所具有的额外功能被成为框架功能~(FW, Framework)\index{框架功能}。图~\ref{fig:devices}~是分布式终端系统中设备的抽象模型。

\begin{figure}[tb]
	\begin{center}
		\includegraphics[width=.7\textwidth]{device}
	\end{center}
	\caption{分布式终端系统中的设备抽象模型}
	\label{fig:devices}
\end{figure}

\subsection{分布式终端系统的概念与架构}\label{sss:02:arch}

本文所述分布式终端系统被称为聚合重构终端，其~``聚合''~体现在三个方面：上下文信息的收集，业务的执行，以及设备的组织：业务上下文方面，终端系统从各种周边智能设备，尤其是传感器上收集各种环境信息和用户状态信息，在收集过程中，各种信息会从各个信息源出发流向信宿，其间，在转发信息的同时，相关信息也被逐步熔合~(Fusion)，最终提炼为业务所需的语义信息；业务执行方面，由于各个设备通过形式一致的远程调用接口将其能力开放给业务应用，对于业务而言，利用远程设备与利用本地功能并没有本质的差别；而在设备组织方面，分布式终端作为一个整体，有机联系了个人周边的各种智能设备，使其统一的为用户服务。

从用户的角度看，分布式终端系统是一个始终跟随着他/她的智能周边业务环境，自主地发现、配置、利用周边的智能设备，为他/她提供各种服务。从业务应用的角度看，分布式终端系统是一个业务运行环境，这个运行环境提供了一个服务发现接口，使之可以发现各种可用业务能力，并利用这些能力服务用户。而从设备角度看，分布式终端系统是一个它所参与的自主的分布式系统，它可以与系统的其他成员通信，加入或退出系统，为应用提供包括感知、计算、存储、执行等各种业务能力，对于能力较高的高级节点，还可能参与系统状态的维护和管理。

这里，这个负责发现、配置、与维护管理周边设备，协助应用进行服务发现的功能被称为分布式终端的框架。更进一步可以将框架划分为两个层次：
\begin{itemize}
	\item 框架服务接口层，对上层的业务应用提供的调用接口，负责屏蔽底层的分布性、异构性，提供统一的服务发现与业务生成机制。
	\item 公共服务层。其二是公共服务层，负责系统相关的数据信息，管理设备能力的变更等。
\end{itemize}
框架功能可能由分布式终端系统内部通过某种方式选择出来的一个或若干个中心节点来提供，也可能利用所有高级节点，在个人域网络上构建一个对等的覆盖网~(Peer-to-Peer Overlay)，利用这个~Overlay~来提供公共服务层。

\subsection{分布式终端系统的工作状态}

作为一个由多个设备构成的虚拟终端，分布式终端系统在与网络和业务交互的时候的状态比普通终端要更为复杂，不论在是否有网络接入的情况下，分布式终端作为周边设备的自组织系统都是存在的，而且，其上也可以运行部分离线应用，辅助用户工作与生活；而当分布式终端系统获得网络连接之后，用户不仅可以通过网络连接，访问互联网，更可以附着在诸如~IP~多媒体子系统~(IMS)~这样的多媒体网络上，接受随时随地的移动业务。因此，如图~\ref{fig:status}~所示，我们定义四种主要的分布式终端系统的工作状态：

\begin{enumerate}
	\item \emph{Isolated/Ready}.\label{stat:dr} 没有附着到网络上，也没有任何应用在运行。
	\item \emph{Isolated/Serving}.\label{stat:ds} 没有附着到网络上，但有本地应用运行。
	\item \emph{Networked/Ready}.\label{stat:ar} 附着在网络上，但没有应用运行。
	\item \emph{Networked/Serving}.\label{stat:as} 附着在网络上，而且运行着应用。
\end{enumerate}

对于所有这些状态，分布式终端都是周边智能设备的自组织系统，并且不断~``聚合''~着周边设备所采集的业务上下文，而当它处于~``服务~(Serving)''~状态的时候，被利用到的设备成为业务执行的一部分，更加紧密地加入到了~``聚合体''~之中。这些状态会随着用户的主观意愿、网络连接状况、业务的运行状态以及其他业务上下文的变化而变更，下面过程~(图~\ref{fig:status})~描述了分布式终端系统的状态转移，我们假设一切从~``Nothing''~这个状态开始：

\begin{figure}[tb]
	\begin{center}
		\includegraphics[width=.9\textwidth]{status}
	\end{center}
	\caption{分布式终端系统的工作状态}
	\label{fig:status}
\end{figure}

\begin{enumerate}
	\item 根据用户的要求，分布式终端启动。所谓用户要求，可能是用户与某个运营商签约，也可能是他/她启动了他/她的第一个设备。终端启动之后就会进入其初始状态――状态~\ref{stat:dr}，在这一状态中，尽管没有任何应用运行，但一些基本的任务已经在运行了，比如，接受用户指令、收集环境和用户状态等。
	\item 当用户启动某个应用或是由于业务上下文触发而导致某个应用自动运行的时候，而这个应用也可以在未接入网络的情况下运行，分布式终端便会从状态~\ref{stat:dr}~进入状态~\ref{stat:ds}。\label{transit:drds}
	\item 作为状态转移~\ref{transit:drds}~的逆过程，无论是用户终止应用还是它正常或异常地退出，分布式终端都会从状态~\ref{stat:ds}~跳转回状态~\ref{stat:dr}。\label{transit:dsdr}
	\item 同样在状态~\ref{stat:ds}，很多种上下文的改变都可能能导致业务行为的改变，比如新设备的加入导致的业务执行能力的提升等，不过这些改变之后，分布式终端系统可能仍会停留在当前状态之中。\label{transit:dsds}
	\item 网络附着会让分布式终端系统从状态~\ref{stat:dr}~跳转到状态~\ref{stat:ar}。在网络附着过程当中，分布式终端需要和网络进行鉴权授权，并进行信息的注册，而当网络中用户的存在性状态~(Presence)~信息的改变被其他同伴或是业务发现之后，可能会发起新的应用会话。
	\item 同样，失去网络连接会使分布式终端从状态~\ref{stat:ar}~回落到状态~\ref{stat:dr}，从这时起，直到用户再次接入网络，用户的存在性信息对于我网络而言就都是不可获得的了。
	\item 与状态转移~\ref{transit:dsds}~类似，在状态~\ref{stat:ar}，分布式终端仍然可以收集环境与用户状态相关信息，并与网络交互，更新网络中的用户的存在性状态。
	\item 与状态转移~\ref{transit:drds}~一样，应用的启动会让分布式终端从状态~\ref{stat:ar}~进入状态~\ref{stat:as}，惟一的不同在于网络同样也可以发起应用会话。
	\item 同样，类似状态转移~\ref{transit:dsdr}，在应用结束之后，分布式终端系统会从状态~\ref{stat:as}~跳转回到状态~\ref{stat:ar}。
	\item 而在状态~\ref{stat:as}~中，与状态转移~\ref{transit:dsds}~类似，各种业务上下文的变化也会影响业务的行为。
	\item 从状态~\ref{stat:ds}~出发，网络附着会使分布式终端跳转到状态~\ref{stat:as}，这样，由于可以接入网络服务或与其他对等实体交换信息，业务的行为可能会发生一定变化。

		而从状态~\ref{stat:as}~出发，如果网络连接中断了，那么就可能发生两种不同的可能性：
	\item 如果应用可以回落到本地继续运行，那么，分布式终端就跳转回状态~\ref{stat:ds}。
	\item 但如果应用无法在本地继续运行，它将被挂起或终止，这时分布式终端就从状态~\ref{stat:as}~直接跳转回到~\ref{stat:dr}~了。
	\item 分布式终端系统可能还涉及到另一个辅助过程：当分布式终端利用到一些并不属于当前用户的设备的时候，可能会有一些设备能力受到限制，无法完全访问，出于安全和经济考虑，设备的属主可能不允许他人使用他的设备访问网络，同时，设备属主又希望通过网络记录他人对其设备的访问并进行计费。这时，对于分布式终端的应用来说，终端系统并没有接入网络，虽然存在一个用于传递计费信息的网络连接，这种状态虽然很特殊，但在分布式终端系统走出实验室而进入到人们的生活当中的时候可能是必不可少的，我们称这种状态为~``\emph{Charging/Serving}''。
\end{enumerate}

\section{分布式终端系统中的设备自组织}

分布式终端系统的框架功能最重要的任务之一就是周边智能设备的自组织，因为用户周边的设备不仅在功能和能力上的差异都非常大，而且设备数量众多、随用户移动变化频繁，使得分别手工配置的时间复杂度非常高且学习曲线陡峭，难以真正走出实验室，因此分布式终端必须尽可能地自组织、自配置，达到所谓的~``零配置~(Zeroconf)''~需求。为了支持分布式终端上的业务应用在这个动态变化的环境中无缝工作，分布式终端设计中考虑了若干个设备自组织相关场景。

周边只能设备自组织的场景可以分为两大类:
\begin{itemize}
	\item 设备发起的行为：设备的加入、离开，以及环境变化引起的功能变化，如网络覆盖条件改变引起设备接入能力的变化等，所有这些变化都会对整个系统的业务能力产生一定影响，终端系统应该能及时发现这些能力的变化，并在必要的时候将变化反应给应用，使应用适应环境的变化。
	\item 应用发起的行为：应用的运行、终止以及各种涉及到资源获取的行为都可能改变各个设备的能力、可用性等各种状态的改变。
\end{itemize}

如第~\ref{sss:02:arch}~小节所述，分布式终端系统的框架功能可以由中心节点提供，也可以由一个~P2P Overlay~来提供，在作者参与的研究与实现工作中，两种构建方式都被先后采用过\ucite{bib:decent}。

\subsection{有中心的组织方式}

所谓有中心组织方式就是首先在周边设备中选择具有足够能力的设备，作为系统的注册中心~(Registar)，当周边其它设备进入到系统范围之内时，发现该设备并向该设备注册自己的能力服务器相关信息，而当业务需要某种业务能力的时候，可以从该设备查询这一能力\ucite{bib:patent-ust-construct,bib:patent-ust-recon}。对于这种有中心的组织方式，我们在设计中考虑了~8~个主要场景：
\begin{enumerate}
	\item 从零构建一个分布式终端系统，这通过首先启动一个高级节点作为主设备~(注册中心)，从而形成一个只有一个设备的最小系统，之后将其它设备添加到这个分布式终端系统之中。
	\item 设备加入分布式终端系统。
	\item 设备退出分布式终端系统。
	\item 框架功能转移，当作为系统的中心的高级节点将离开系统的时候，注册中心的相关信息需要转移到另一个设备之上，以便系统可以连续的工作。\label{scenario:migrate}
	\item 启动一个应用，应用在启动的同时还需要查询、协商、获取所需业务能力。
	\item 应用变更所使用的能力服务器，这可能是业务主动发起的，或是受到环境影响，如能力服务器不可用或有应用所需的新的能力服务器由不可用变为可用的时候，都有可能进入此场景。
	\item 应用释放所使用的能力服务器。
	\item 应用结束。
\end{enumerate}

我们通过在实验室内构建一个演示系统基本实现了上述场景，惟一的难于完全实现的场景是场景~\ref{scenario:migrate}~``框架功能转移''，如果有应用正在进行，框架功能转移的时候会造成业务中断，为了克服这一问题并进一步提高系统的可靠性，在演示系统的升级版本中，我们引入了无中心的架构。

\subsection{无中心的组织方式}

通过利用所有高级节点，在个人周边构建一个~P2P Overlay~来充当框架功能，分布式终端系统获得了如下的功能和性能提升：
\begin{itemize}
	\item 无须考虑框架功能转移的问题，通过~P2P Overlay~提供的冗余性，在损失部分节点的时候仍然保持信息的完整性。
	\item 消除了单点失败~(Single-point failure)~问题，使得个别设备的临时性故障不至于影响系统的可靠性，这对于设备稳定性比较低的民用设备是非常有意义的。
	\item 增强了系统的可伸缩性，当个人周边设备的数量很多的时候，不至于让承担框架功能的设备的服在过高。
\end{itemize}

在获得这些优点的同时，无中心架构也引入了一些需要解决问题，尤其是在分布式终端系统随用户进行移动的时候，
\begin{itemize}
	\item 设备的加入和退出可能是集体性的，如，当用户进入居室的时候，室内很多设备可能同时加入系统，这对如何可靠地保存系统信息是一个严峻的挑战。
	\item 大量设备同时加入、退出还可能会引发短时间内的大量的通信信息，如何降低此时传输消息的数量，降低系统自组织所需要的消息对业务的影响同样是一个问题。
\end{itemize}
这些问题将在下面的章节中被讨论、解决。

% vim: set ft=tex:
