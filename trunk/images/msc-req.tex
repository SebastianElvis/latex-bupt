\documentclass{article}
\usepackage{msc}
\usepackage{CJK}
\pagestyle{empty}
\begin{document}
\begin{CJK}{GBK}{song}
		\begin{msc}{服务发现}
			\declinst{dir1}{节点~B}{目录节点1}
			\declinst{dir2}{节点~C}{目录节点2}
			\declinst{app}{节点~A}{应用}
			\declinst{cs1}{节点~D}{能力服务器}
			\declinst{cs2}{节点~E}{能力服务器}
			\mess{能力服务器发现请求}{app}{dir1}[1]
			\nextlevel[3]
			\mess{设备~E~可用}{dir1}{app}
			\nextlevel[2]
			\mess{设备~D~可用}{dir2}{app}
			\nextlevel
			\condition{能力协商}{app,cs1,cs2}
			\nextlevel[3]
			\mess{确认使用~D}{app}{dir1}[1]
			\nextlevel
		\end{msc}
\end{CJK}
\end{document}
